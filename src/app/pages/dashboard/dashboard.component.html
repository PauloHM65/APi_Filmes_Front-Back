<div class="container mt-4">
  <h2 class="mb-4">Meu Dashboard</h2>

  <!-- Loading and Error States -->
  <div *ngIf="isLoading" class="text-center mt-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading && !error">
    <!-- Row for Value Widgets -->
    <div class="row mb-4">
      <ng-container *ngFor="let widget of widgets">
        <div *ngIf="widget.type === 'value'" class="col-md-3">
          <div class="card text-white bg-primary mb-3">
            <div class="card-header">{{ widget.title }}</div>
            <div class="card-body">
              <h4 class="card-title">
                {{ widget.data }} {{ widget.unit || '' }}
              </h4>
            </div>
          </div>
        </div>
      </ng-container>
    </div>

    <!-- Row for Chart Widgets -->
    <div class="row">
      <ng-container *ngFor="let widget of widgets">
        <div *ngIf="widget.type === 'chart'" class="col-md-6">
          <div class="card">
            <div class="card-header">
              {{ widget.title }}
            </div>
            <div class="card-body" [ngSwitch]="widget.chartType">
              
              <!-- Bar Chart -->
              <ngx-charts-bar-horizontal *ngSwitchCase="'bar'"
                [view]="[500, 400]"
                [results]="widget.data"
                [scheme]="colorScheme"
                [xAxis]="showXAxis"
                [yAxis]="showYAxis"
                [showXAxisLabel]="showXAxisLabel"
                [showYAxisLabel]="showYAxisLabel"
                [xAxisLabel]="'Quantidade'"
                [yAxisLabel]="'GÃªnero'">
              </ngx-charts-bar-horizontal>

              <!-- Pie Chart -->
              <ngx-charts-pie-chart *ngSwitchCase="'pie'"
                [view]="[500, 400]"
                [results]="widget.data"
                [scheme]="colorScheme"
                [legend]="true"
                [labels]="true">
              </ngx-charts-pie-chart>

              <!-- You can add more chart types here as needed -->
              <div *ngSwitchDefault>
                Chart type '{{ widget.chartType }}' not implemented.
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>